<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map Test</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <style>
        #map {
            height: 1000px;
            width: 100% ;
        }
        #filter-controls {
            /* position: absolute; */
            top: 10px;
            left: 10px;
            background-color: white;
            padding: 10px;
            margin-left: 40px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div id="filter-controls">
        <label><input type="checkbox" id="campfire-filter" checked> Campfires</label>
        <label><input type="checkbox" id="scenes-filter" checked> Scenes</label>
        <label><input type="checkbox" id="equipment-filter" checked> equipment</label>
        <label><input type="checkbox" id="quest-filter" checked> Quests</label>
        <label><input type="checkbox" id="poi-filter" checked> Points Of Interest</label>
        <label><input type="checkbox" id="collectables-filter" checked> Collectables</label>
    </div>
    <div id="map"></div>

    <script>
        // Making the map
        var map = L.map('map', {
            crs: L.CRS.Simple
        });

        var bounds = [[0,0], [1000,1000]];
        var image = L.imageOverlay('assets/medhen4k-scaled.jpg', bounds).addTo(map); // this is making the image into the map
        map.fitBounds(bounds);

        // Making the Icons
        var MapIcon = L.Icon.extend({
        options: {
            // im stilling messing with these
                iconSize:     [25, 25], // size of icon
                iconAnchor:   [25, 25], // finer placement???
                popupAnchor:  [-3, -76] // no clue
            }
        });
        var campIcon = new MapIcon({iconUrl: 'assets/campfire.png'}),
        scenesIcon = new MapIcon({iconUrl: 'assets/scenes.png'}),
        equipmentIcon = new MapIcon({iconUrl: 'assets/equipment.png'}),
        questIcon = new MapIcon({iconUrl: 'assets/quest.png'}),
        poiIcon = new MapIcon({iconUrl: 'poi.png'}),
        collectablesIcon = new MapIcon({iconUrl: 'assets/collectables.png'});

        L.icon = function (options) {
            return new L.Icon(options);
        };

        // this is filter stuff
        var campfireLayer = L.layerGroup();
        var scenesLayer = L.layerGroup();
        var equipmentLayer = L.layerGroup();
        var questLayer = L.layerGroup();
        var poiLayer = L.layerGroup();
        var collectablesLayer = L.layerGroup();


        document.getElementById('campfire-filter').addEventListener('change', function() {
            if (this.checked) {
                map.addLayer(campfireLayer);
            } else {
                map.removeLayer(campfireLayer);
            }
        });

        document.getElementById('scenes-filter').addEventListener('change', function() {
            if (this.checked) {
                map.addLayer(scenesLayer);
            } else {
                map.removeLayer(scenesLayer);
            }
        });

        document.getElementById('equipment-filter').addEventListener('change', function() {
            if (this.checked) {
                map.addLayer(equipmentLayer);
            } else {
                map.removeLayer(equipmentLayer);
            }
        });

        document.getElementById('quest-filter').addEventListener('change', function() {
            if (this.checked) {
                map.addLayer(questLayer);
            } else {
                map.removeLayer(questLayer);
            }
        });

        document.getElementById('poi-filter').addEventListener('change', function() {
            if (this.checked) {
                map.addLayer(poiLayer);
            } else {
                map.removeLayer(poiLayer);
            }
        });

        document.getElementById('collectables-filter').addEventListener('change', function() {
            if (this.checked) {
                map.addLayer(collectablesLayer);
            } else {
                map.removeLayer(collectablesLayer);
            }
        });


        // Testing them
        var markers = [
            L.marker([50, 50], {icon: campIcon}).addTo(campfireLayer).bindPopup('50, 50 <br><a href="https://www.google.com/" target="_blank">google</a>'),
            L.marker([50, 75], {icon: scenesIcon}).addTo(scenesLayer).bindPopup('50, 75 '),
            L.marker([100, 100], {icon: equipmentIcon}).addTo( equipmentLayer).bindPopup('100, 100'),
            L.marker([500, 500], {icon: questIcon}).addTo(questLayer).bindPopup('500, 500 tester for sidebar'),
            L.marker([1000, 1000], {icon: poiIcon}).addTo(poiLayer).bindPopup('1000, 1000'),
            L.marker([25, 250], {icon: collectablesIcon}).addTo(collectablesLayer).bindPopup('25, 250'),
            L.marker([420, 420], {icon: campIcon}).addTo(campfireLayer).bindPopup('420, 420'),
            L.marker([500, 700], {icon: scenesIcon}).addTo(scenesLayer).bindPopup('500, 700'),
            L.marker([1500, 1500], {icon: equipmentIcon}).addTo( equipmentLayer).bindPopup('1500, 1500'),
            L.marker([899, 899], {icon: questIcon}).addTo(questLayer).bindPopup('899, 899.'),
            L.marker([1245, 1245], {icon: collectablesIcon}).addTo(collectablesLayer).bindPopup('tightness test 1'),
            L.marker([1255, 1255], {icon: equipmentIcon}).addTo( equipmentLayer).bindPopup('tighness test 2'),
        ];
        // Tempt fix for no sidebar is the added links to Popups

        // Filter
        campfireLayer.addTo(map);
        scenesLayer.addTo(map);
        equipmentLayer.addTo(map);
        questLayer.addTo(map);
        poiLayer.addTo(map);
        collectablesLayer.addTo(map);



    </script>
</body>
</html>